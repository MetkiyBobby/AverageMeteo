#! python3
# Программа для подсчета среднесуточных и среднемесячных значений и не только
# метеовеличин по данным АМК

"""
Общий план:
1. Программа должна принимать данные наблюдений с АМК
2. Программа должна рассчитывать среднюю температуру воздуха по суткам
и за месяц
3. Программа должна выводить результаты расчета в удобной форме
"""

"""
План реализации:
1. Создать команду получающую данные 
2. Создать регулярное выражение для поиска в тексте строк содержащих данные
наблюдений АМК. Причем только данные в начале каждого из 24 часов в сутках.
3. Создать список содержащий данные в формате ГГГГ-ММ-ДД ЧЧ Твозд
(приблизительно) с помощью методов модуля re
4. Создать функцию редактирующую дату и время наблюдений таким образом,
чтобы они соответствовали метеорологическим суткам и часовому поясу
UTC+3
5. Создать функцию которая будет подсчитывать среднесуточную температуру
6. Создать функцию которая будет подсчитывать среднемесячную температуру
7. Создать функцию которая будет выводить данные для пользователя
"""

import pyperclip  # импорт модуля pyperclip для работы с буфером обмена
import re # импорт модуля для работы с регулярными выражениями

initialData = pyperclip.paste() # вставка исходных данных из буфера обмена

def timeFiltering(data):
    """Функция принимает исходный текст и возвращает список содержащий
    только данные измерений в начале каждого часа"""
    
    amcDataRegex = re.compile(r'''
    (\d\d\d\d-\d\d-\d\d\s\d\d:00)    # ГГГГ-ММ-ДД ЧЧ:00, где 00 - минуты
    (:\d\d)                          # секунды
    (\s)                             # разделитель
    (\d+\.\d+|None)                  # направление ветра
    (\s)                             # разделитель
    (\d+\.\d+|None)                  # скорость ветра
    (\s)                             # разделитель
    (\d+\.\d+|None)                  # порыв ветра
    (\s)                             # разделитель
    (-?\d+\.\d+|None)                # температура точки росы
    (\s)                             # разделитель
    (\d+\.\d+|None)                  # относительная влажность
    (\s)                             # разделитель
    (-?\d+\.\d+|None)                # температура воздуха
    (\s)                             # разделитель
    (\d+\.\d+|None)                  # атмосферное давление
    (\s)                             # разделитель
    (-?\d+\.\d+|None)                # тенденция
    ''',re.X)
    data = amcDataRegex.findall(initialData)

# TODO: Функция для перевода календарной даты в метеорологическую с учетом
# часового пояса
